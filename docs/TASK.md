# rurl開発タスク一覧（WBS）

## プロジェクト概要

ブラウザクッキーを使用してHTTPアクセスができるcurlの
Rust実装

## ステータス凡例

- ⏳: 未着手
- 🚧: 作業中
- ✅: 完了
- 📌: 保留
- 🚫: 中止

## タスク一覧

### Phase 1: プロジェクト基盤構築

| タスクID | ステータス | タスク内容 | 見積工数 | 依存関係 | 担当者 | 備考 |
| --- | --- | --- | --- | --- | --- | --- |
| T001 | ✅ | Rustプロジェクト初期化とCargo.toml設定 | 0.5日 | - | - | cratesの選定含む |
| T002 | ✅ | プロジェクト構造とモジュール設計 | 1日 | T001 | - | src/lib.rs, main.rs等 |
| T000 | ✅ | GitHub Actions基本ビルド確認設定 | 0.5日 | T002 | - | Rust build, testのみ |
| T003 | ✅ | CLI引数パーサー実装（clap使用） | 1日 | T000 | - | curl互換オプション対応 |
| T004 | ✅ | 基本的なログ出力システム構築 | 0.5日 | T002 | - | env_logger or tracing |

### Phase 2: HTTP基本機能実装

| タスクID | ステータス | タスク内容 | 見積工数 | 依存関係 | 担当者 | 備考 |
| --- | --- | --- | --- | --- | --- | --- |
| T005 | ✅ | HTTP/HTTPSクライアント基盤実装 | 2日 | T003 | - | reqwest or hyper使用 |
| T006 | ✅ | GET/POST/PUT/DELETE対応 | 1日 | T005 | - | -X/--request |
| T007 | ✅ | カスタムヘッダー機能実装 | 0.5日 | T005 | - | -H, --headerオプション |
| T008 | ✅ | リクエストボディ送信機能 | 0.5日 | T006 | - | -d, --dataオプション |
| T009 | ✅ | 基本認証機能実装 | 1日 | T005 | - | -u, --userオプション |

### Phase 3: ブラウザクッキー統合機能

| タスクID | ステータス | タスク内容 | 見積工数 | 依存関係 | 担当者 | 備考 |
| --- | --- | --- | --- | --- | --- | --- |
| T010 | ✅ | クッキー抽出ライブラリ調査 | 1日 | T002 | - | yt-dlp参照 |
| T011 | ✅ | Chromeクッキー抽出機能実装（macOS） | 1日 | T010 | - | Keychain復号まで対応 |
| T012 | ✅ | Firefoxクッキー抽出機能実装（macOS） | 1日 | T010 | - | SQLiteベース、プロファイル対応 |
| T013 | ✅ | Safariクッキー抽出機能実装（macOS） | 2日 | T010 | - | .binarycookies形式対応 |
| T014 | ✅ | Edgeクッキー抽出機能実装（macOS） | 0.5日 | T011 | - | Chromium系 |
| T015 | ✅ | その他ブラウザ対応（macOS） | 1日 | T011,T012 | - | Brave, Opera, Vivaldi等 |
| T016 | ✅ | ブラウザプロファイル指定機能（macOS） | 0.5日 | T011-15 | - | :PROFILE構文対応 |
| T017 | ✅ | Firefoxコンテナタブ対応（macOS） | 0.5日 | T012 | - | ::CONTAINER構文対応 |
| T017c | ✅ | HTTPリクエストへのブラウザCookie適用 | 0.5日 | T011-17 | - | Cookieヘッダー生成 |

### Phase 3b: ブラウザクッキー統合機能（Windows/Linux）

| タスクID | ステータス | タスク内容 | 見積工数 | 依存関係 | 担当者 | 備考 |
| --- | --- | --- | --- | --- | --- | --- |
| T011a | ⏳ | Chromeクッキー抽出機能実装（Windows） | 1日 | T011 | - | DPAPI対応 |
| T011b | ⏳ | Chromeクッキー抽出機能実装（Linux） | 1日 | T011 | - | keyring対応 |
| T012a | ⏳ | Firefoxクッキー抽出機能実装（Windows） | 1日 | T012 | - | SQLiteベース、プロファイル対応 |
| T012b | ⏳ | Firefoxクッキー抽出機能実装（Linux） | 1日 | T012 | - | SQLiteベース、プロファイル対応 |
| T013a | 📌 | Safariクッキー抽出機能実装（Windows） | - | T013 | - | Safari未対応 |
| T013b | 📌 | Safariクッキー抽出機能実装（Linux） | - | T013 | - | Safari未対応 |
| T014a | ⏳ | Edgeクッキー抽出機能実装（Windows） | 0.5日 | T011a | - | Chromium系 |
| T014b | ⏳ | Edgeクッキー抽出機能実装（Linux） | 0.5日 | T011b | - | Chromium系 |
| T015a | ⏳ | その他ブラウザ対応（Windows） | 1日 | T011a,T012a | - | Brave等 |
| T015b | ⏳ | その他ブラウザ対応（Linux） | 1日 | T011b,T012b | - | Brave等 |
| T016a | ⏳ | ブラウザプロファイル指定機能（Windows） | 0.5日 | T011a-15a | - | :PROFILE構文対応 |
| T016b | ⏳ | ブラウザプロファイル指定機能（Linux） | 0.5日 | T011b-15b | - | :PROFILE構文対応 |
| T017a | ⏳ | Firefoxコンテナタブ対応（Windows） | 0.5日 | T012a | - | ::CONTAINER構文対応 |
| T017b | ⏳ | Firefoxコンテナタブ対応（Linux） | 0.5日 | T012b | - | ::CONTAINER構文対応 |
| T018 | ⏳ | LinuxキーリングでのChromium復号化 | 2日 | T011 | - | +KEYRING構文対応 |

### Phase 4: プロキシ・SSL/TLS機能

| タスクID | ステータス | タスク内容 | 見積工数 | 依存関係 | 担当者 | 備考 |
| --- | --- | --- | --- | --- | --- | --- |
| T019 | ⏳ | HTTPプロキシ機能実装 | 1日 | T005 | - | -x, --proxyオプション |
| T020 | ⏳ | HTTPS/SOCKSプロキシ対応 | 1日 | T019 | - | 複数プロトコル対応 |
| T021 | ⏳ | プロキシ認証機能 | 0.5日 | T019 | - | --proxy-userオプション |
| T022 | ⏳ | カスタムCA証明書対応 | 1日 | T005 | - | --cacertオプション |
| T023 | ⏳ | クライアント証明書認証 | 1日 | T022 | - | --cert, --keyオプション |
| T024 | ⏳ | SSL証明書検証スキップ機能 | 0.5日 | T005 | - | --insecure, -kオプション |

### Phase 5: 高度なHTTP機能

| タスクID | ステータス | タスク内容 | 見積工数 | 依存関係 | 担当者 | 備考 |
| --- | --- | --- | --- | --- | --- | --- |
| T025 | ✅ | HTTPリダイレクト追跡機能 | 0.5日 | T005 | - | -L, --locationオプション |
| T025a | ✅ | リダイレクト時のPOST維持オプション対応 | 0.5日 | T025 | - | --post301/302/303 |
| T025b | ✅ | リダイレクト時の認証情報引き継ぎ | 0.5日 | T025 | - | --location-trusted |
| T026 | ✅ | リダイレクト制限機能 | 0.5日 | T025 | - | --max-redirsオプション |
| T027 | ✅ | タイムアウト機能実装 | 1日 | T005 | - | --timeout, --connect-timeoutオプション |
| T028 | ✅ | リトライ機能実装 | 1日 | T005 | - | --retry, --retry-delayオプション |
| T029 | ✅ | User-Agent設定機能 | 0.5日 | T005 | - | --user-agentオプション |
| T030 | ✅ | ファイル出力機能 | 0.5日 | T005 | - | -o, --outputオプション |

### Phase 6: デバッグ・出力機能

| タスクID | ステータス | タスク内容 | 見積工数 | 依存関係 | 担当者 | 備考 |
| --- | --- | --- | --- | --- | --- | --- |
| T031 | ⏳ | 詳細出力モード実装 | 1日 | T005 | - | -v, --verboseオプション |
| T032 | ⏳ | サイレントモード実装 | 0.5日 | T005 | - | -s, --silentオプション |
| T033 | ⏳ | JSON整形出力機能 | 1日 | T005 | - | 自動判定・pretty-print |
| T034 | ⏳ | 進捗表示機能 | 1日 | T005 | - | プログレスバー |

### Phase 7: エラーハンドリング・セキュリティ

| タスクID | ステータス | タスク内容 | 見積工数 | 依存関係 | 担当者 | 備考 |
| --- | --- | --- | --- | --- | --- | --- |
| T035 | ⏳ | エラーメッセージ国際化 | 1日 | T004 | - | 分かりやすいエラー表示 |
| T036 | ⏳ | 終了ステータスコード統一 | 0.5日 | T035 | - | curl互換のexit codes |
| T037 | ⏳ | セキュリティ監査・脆弱性チェック | 2日 | T001-T036 | - | cargo audit使用 |
| T038 | ⏳ | メモリ安全性検証 | 1日 | T001-T036 | - | Miri, valgrind等 |

### Phase 8: 品質保証・テスト

| タスクID | ステータス | タスク内容 | 見積工数 | 依存関係 | 担当者 | 備考 |
| --- | --- | --- | --- | --- | --- | --- |
| T039 | ⏳ | 単体テストスイート作成 | 3日 | T005,T011-T015 | - | 各機能のunit test |
| T040 | ⏳ | 統合テストスイート作成 | 2日 | T039 | - | エンドツーエンドテスト |
| T041 | ⏳ | ブラウザクッキー機能テスト | 2日 | T011-T018,T039 | - | 各ブラウザ・OS組合せ |
| T042 | ⏳ | パフォーマンステスト | 1日 | T040 | - | curlとの性能比較 |
| T043 | ⏳ | 高度なCI/CD機能追加 | 2日 | T039-T042 | - | 複数OS, カバレッジ, 脆弱性チェック |
| T043a | ✅ | テストカバレッジ計測環境の整備 | 1日 | T039-T043 | - | cargo-llvm-cov等 |

### Phase 9: OS固有対応・互換性

| タスクID | ステータス | タスク内容 | 見積工数 | 依存関係 | 担当者 | 備考 |
| --- | --- | --- | --- | --- | --- | --- |
| T044 | ⏳ | Windows固有機能実装・テスト | 2日 | T011-T018 | - | UAC、権限処理 |
| T045 | ⏳ | macOS固有機能実装・テスト | 2日 | T011-T018 | - | Keychain、権限処理 |
| T046 | ⏳ | Linux固有機能実装・テスト | 2日 | T011-T018 | - | 各種ディストリビューション |
| T047 | ⏳ | クロスコンパイル設定 | 1日 | T001 | - | 複数ターゲット対応 |

### Phase 10: パッケージング・配布

| タスクID | ステータス | タスク内容 | 見積工数 | 依存関係 | 担当者 | 備考 |
| --- | --- | --- | --- | --- | --- | --- |
| T048 | ⏳ | バイナリ最適化・サイズ削減 | 1日 | T001-T047 | - | strip, LTO等 |
| T049 | ⏳ | 配布パッケージ作成 | 2日 | T048 | - | deb, rpm, msi, brew等 |
| T050 | ⏳ | crates.io公開準備 | 1日 | T048 | - | メタデータ整備 |

### Phase 11: ドキュメント・サポート

| タスクID | ステータス | タスク内容 | 見積工数 | 依存関係 | 担当者 | 備考 |
| --- | --- | --- | --- | --- | --- | --- |
| T051 | ⏳ | マニュアルページ作成 | 2日 | T003,T036 | - | man page形式 |
| T052 | ⏳ | 使用例・チュートリアル作成 | 2日 | T001-T050 | - | README充実化 |
| T053 | ⏳ | 移行ガイド作成 | 1日 | T052 | - | curlからの移行手順 |

## 工数見積り合計

- **総工数**: 約65.5人日（約13週間）
- **基本ビルドCI（T000）**: 0.5人日 ※T002後に実施
- **クリティカルパス**: ブラウザクッキー機能（Phase 3）が
  最重要

## 開発順序（優先度順）

1. **Phase 1**: プロジェクト基盤構築（T001-T004、T000含む）
2. **Phase 2**: HTTP基本機能（T005-T009）
3. **Phase 3**: ブラウザクッキー統合（T010-T018）
4. **Phase 4-7**: 拡張機能実装
5. **Phase 8**: 品質保証・高度なCI/CD（T039-T043）
6. **Phase 9-11**: 製品化・配布

## マイルストーン

1. **基盤✅版（T001-T004✅）**: ビルド環境＋基本構造
2. **Alpha版（T001-T009✅）**: 基本HTTP機能のみ
3. **Beta版（T001-T018✅）**: ブラウザクッキー機能含む
4. **RC版（T001-T043✅）**: 全機能+CI/CD完備
5. **GA版（T001-T053✅）**: 本番リリース対応

## リスク・課題

- ブラウザの仕様変更によるクッキー抽出機能への影響
- OS固有のセキュリティ機能（macOS Gatekeeper、Windows UAC）
  への対応
- ブラウザベンダーによるクッキー暗号化強化への対応
- 各種ライセンス（とくにrookie crate）の互換性確認
